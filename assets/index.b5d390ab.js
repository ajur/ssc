var z=Object.defineProperty,F=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var v=(s,e,t)=>e in s?z(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,T=(s,e)=>{for(var t in e||(e={}))G.call(e,t)&&v(s,t,e[t]);if(w)for(var t of w(e))$.call(e,t)&&v(s,t,e[t]);return s},b=(s,e)=>F(s,V(e));var n=(s,e,t)=>(v(s,typeof e!="symbol"?e+"":e,t),t);import{L as _,W as R,g as l,I as d,C as m,S as y,r as k,a as U,T as p,b as j,c as x,d as C,M as q,A as Y,t as J}from"./vendor.0574ccc8.js";const K=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}};K();console.log(`
%cSuper Simple Clones %cby Adam Jurczyk
`,`
font-size: 3em;
padding: 10px;
font-family: fantasy;
`,`
font-size: 2em;
padding: 10px;
font-family: cursive;
`);console.log(`
    Hi! I'm flattered you thought it's worthwile to poke around here.

    BUT if you really want to look under the hood, you can as well just check unminified sources at https://github.com/ajur/ssc

    Have fun and stay safe!
    `);function Q(){return[{url:"/simon/TeacherA.ttf",name:"TeacherA"},{url:"/simon/AegrisOutlineRegular.ttf",name:"AegisOutlet"},{url:"/simon/simon.json"},{url:"/simon/music.mp3",name:"simon_music"},{url:"/simon/notes.mp3",name:"simon_notes",onComplete:Z(X)}].map(ee)}const X={"note-0":{start:0,end:1},"note-1":{start:1,end:2},"note-2":{start:2,end:3},"note-3":{start:3,end:4},"note-4":{start:4,end:5},"note-5":{start:5,end:6}},Z=s=>e=>{var t;return(t=e.sound)==null?void 0:t.addSprites(s)},ee=s=>{var e;return((e=s.url)==null?void 0:e.startsWith("/"))?b(T({},s),{url:"/ssc/"+s.url.substring(1)}):s};_.registerPlugin(R);function te({assets:s,onLoaded:e,onClicked:t,onRevealed:o,revealTime:i=.3,logoAnimTime:r=1}){const a=document.querySelector("#preloader"),u=a.querySelector(".preloader-footer"),c=a.querySelector("svg path"),f=c.getTotalLength();c.style.strokeDasharray=`${f} ${f}`,c.style.strokeDashoffset=`${f}`,c.style.strokeOpacity="1.0",l.to(c.style,{duration:r,strokeDashoffset:0,ease:"power2.inOut"});const E=()=>{l.killTweensOf(c.style),a.remove(),o==null||o()},D=()=>{l.to(a,{duration:i,top:"-100%",onComplete:E}),t==null||t()},N=(...S)=>{h.onProgress.detachAll(),u.innerHTML='<span class="blink">ready</div>',a.addEventListener("pointerdown",D,{once:!0}),e(...S)},H=S=>{u.style.width=`${S.progress}%`},h=_.shared;h.onProgress.add(H),h.onComplete.once(N),h.add(s),h.load()}const L={clamp:(s,e,t)=>s<e?e:s>t?t:s},O={load:oe,loadDefault:M,save:ie},se={debounce:ne};function oe(s){return M(s,void 0)}function M(s,e){const t=globalThis.localStorage.getItem(s);return t?JSON.parse(t):e}function ie(s,e){globalThis.localStorage.setItem(s,JSON.stringify(e))}function ne(s,e=300){let t;return function(...o){clearTimeout(t),t=setTimeout(()=>{s.apply(this,o)},e)}}function re(s,e,t){const o=s.getLocalBounds(),i=Math.max(1,o.width),r=Math.max(1,o.height);return Math.min(e/i,t/r)}function g(...s){return Math.min(1,re(...s))}const P="sound_config",ae={volume:.5,musicVolume:.5};class le{constructor(){n(this,"config");n(this,"_currentTrack");n(this,"saveConfig");this.saveConfig=se.debounce(()=>O.save(P,this.config)),this.config=O.loadDefault(P,T({},ae)),d.volumeAll=this.config.volume}playMusic(e){const t=d.find(e);if(!t){console.warn(`Music track ${e} not found!`);return}t!=this._currentTrack&&(this._currentTrack&&this.fadeOut(this._currentTrack),t.loop=!0,this.fadeIn(t,{isMusic:!0}),this._currentTrack=t)}get currentTrack(){return this._currentTrack}get volume(){return this.config.volume}set volume(e){d.volumeAll=this.config.volume=L.clamp(e,0,1),this.saveConfig()}get musicVolume(){return this.config.musicVolume}set musicVolume(e){if(e===this.config.musicVolume)return;const t=L.clamp(e,0,1);this._currentTrack&&(this._currentTrack.volume=t,t>0&&!this._currentTrack.isPlaying&&this.fadeIn(this._currentTrack)),this.config.musicVolume=t,this.saveConfig()}fadeIn(e,{duration:t=.5,isMusic:o=!1}={}){if(this.volume==0||o&&this.musicVolume==0)return;const i=o?this.config.musicVolume:1;e.volume=0,e.play(),l.timeline().to(e,{volume:i,duration:t,ease:"sine.inOut"})}fadeOut(e,{duration:t=.5}={}){l.timeline().to(e,{volume:0,duration:t,ease:"sine.inOut"}).call(()=>{e.stop()})}addSoundsControlPanel(e){const t=e.addFolder({title:"Sound"});t.addInput(this,"volume",{min:0,max:1,step:.1,label:"global volume"}),t.addInput(this,"musicVolume",{min:0,max:1,step:.1,label:"music volume"})}}const I=new le,W=["Too much!","Too many hits.","Why so hasty?","Not so fast.","Bad forcast.","Wait for it!"],ce=k(0,W.length),he=()=>W[ce()],B=["Error.","Wrong one.","Boom! Wrong!","Bad luck!","You missed!","Not this one.","Ouch! Wrong.","Too hard to remember?"],ue=k(0,B.length),de=()=>B[ue()],A=[{img:"simon/ss_lights_0_yellow.png",note:"note-0"},{img:"simon/ss_lights_1_green.png",note:"note-1"},{img:"simon/ss_lights_2_cyan.png",note:"note-2"},{img:"simon/ss_lights_3_blue.png",note:"note-3"},{img:"simon/ss_lights_4_purple.png",note:"note-4"},{img:"simon/ss_lights_5_red.png",note:"note-5"}];class me extends m{constructor(){super();n(this,"baseSprite");n(this,"segments");n(this,"notes");n(this,"sequence",[]);n(this,"sequenceTimeline");n(this,"tappedSequence",[]);n(this,"nextLevelTimeout");n(this,"getNextSequenceIndex");const e=this.baseSprite=y.from("simon/ss_lights_base.png");e.anchor.set(.5),this.addChild(e);const t=this.segments=this.createSegments();this.addChild(...t),this.notes=d.find("simon_notes"),this.getNextSequenceIndex=k(0,t.length),this.interactive=!1,this.hitArea=new U(0,0,e.width/2),p.shared.add(this.rotate,this),this.on("pointerdown",this.clicked,this)}rotate(){this.rotation+=3e-4}resetSequence(){var e;this.sequence=[],this.tappedSequence=[],(e=this.sequenceTimeline)==null||e.kill(),this.nextLevelTimeout&&clearTimeout(this.nextLevelTimeout)}extendSequence(){this.sequence.push(this.getNextSequenceIndex())}get level(){return this.sequence.length}newGame(){this.resetSequence(),this.nextLevel()}nextLevel(){this.interactive=!1,this.extendSequence(),this.emit("set_msg",`Level ${this.level}`),this.playSequence(1)}gameOver(e){this.errSound(),this.nextLevelTimeout&&clearTimeout(this.nextLevelTimeout),this.interactive=!1,this.emit("game_over",e,this.level-1)}playSequence(e=0){const t=this.sequenceTimeline=l.timeline({delay:e});this.sequence.forEach(o=>t.add(this.lightUpSegment(o),"<0.667")),t.call(()=>{this.tappedSequence=[],this.interactive=!0,this.nextLevelTimeout=setTimeout(()=>{this.gameOver("Don't wait so long. Repeat whole pattern.")},5e3)})}clicked(e){const t=this.getClickedSegmentIndex(e);this.lightUpSegment(t,!0),this.checkSeqClick(t)}getClickedSegmentIndex(e){const t=e.data.getLocalPosition(this),o=Math.atan2(t.y,t.x);return(Math.floor((o+Math.PI/2)/(Math.PI/3))+6)%6}checkSeqClick(e){if(clearTimeout(this.nextLevelTimeout),this.tappedSequence.length>=this.sequence.length){this.gameOver(he());return}const t=this.sequence[this.tappedSequence.length];if(e!==t){this.gameOver(de());return}this.tappedSequence.push(e),this.tappedSequence.length==this.sequence.length?this.nextLevelTimeout=setTimeout(()=>{this.okSound(),this.nextLevel()},1e3):this.nextLevelTimeout=setTimeout(()=>{this.gameOver("Don't wait so long. Repeat whole pattern.")},5e3)}lightUpSegment(e,t=!1){const o=this.segments[e],i=A[e].note,r=l.timeline().call(()=>{this.notes.play(i)});return t?r.fromTo(o,{alpha:1},{alpha:0,duration:.5,ease:"power2.in"}):(r.to(o,{alpha:1,duration:.1,ease:"power2.out"}),r.to(o,{alpha:0,duration:.6,ease:"power2.in"})),r}createSegments(){return A.map(e=>{const t=y.from(e.img);return t.anchor.set(.5),t.alpha=0,t})}okSound(){["note-1","note-3","note-5"].forEach((e,t)=>setTimeout(()=>this.notes.play(e),t*50))}errSound(){["note-0","note-3","note-4"].forEach(e=>this.notes.play(e))}destroy(e){p.shared.remove(this.rotate,this),super.destroy(e)}}class pe extends m{constructor(e,t,o=""){super();n(this,"_panelWidth");n(this,"_panelHeight");n(this,"bkg");n(this,"msg");this._panelWidth=e,this._panelHeight=t,this.bkg=this.addChild(this.createBackground(e,t)),this.msg=this.addChild(this.createMsg(e,o)),this.show(o,!0)}show(e="",t=!1,o=!1){this.msg.text=e;const i=l.timeline().set(this,{visible:!0}).add([l.fromTo(this.scale,{x:0},{x:1,ease:"power2.out",duration:.2}),l.fromTo(this,{alpha:0},{alpha:1,ease:"power2.out",duration:.2})]).set(this,{interactive:!0},o?"<1":">");t&&i.progress(1)}hide(){this.interactive=!1,l.timeline().to(this.scale,{x:0,ease:"power2.out",duration:.2}).to(this,{alpha:0,ease:"power2.in",duration:.2},"<").set(this,{visible:!1})}createBackground(e,t){const o=y.from(j.EMPTY);return o.width=e,o.height=t,o.anchor.set(.5),o}createMsg(e,t){const o=new x(t!=null?t:"",{fill:15198183,fontSize:32,padding:15,fontFamily:"AegisOutlet",wordWrap:!0,wordWrapWidth:e*.9,align:"center"});return o.anchor.set(.5),o}}class ge extends m{constructor(e,t){super();n(this,"bkg");n(this,"bottom");n(this,"sceneWidth");n(this,"sceneHeight");n(this,"starShip");n(this,"txt");n(this,"popup");n(this,"title");this.sceneWidth=e,this.sceneHeight=t,this.bkg=this.addChild(this.createBkg()),this.bottom=this.addChild(new m),this.txt=this.bottom.addChild(this.infoText()),this.starShip=this.addChild(new me),this.title=this.addChild(this.createTitle()),this.popup=this.addChild(new pe(400,400,`Welcome!

Click to start new game.`)),this.popup.on("pointertap",this.newGame,this),this.starShip.on("set_msg",this.logMsg,this),this.starShip.on("game_over",this.gameOver,this),this.resize(e,t),p.shared.add(this.moveBackground,this)}newGame(){this.popup.hide(),this.starShip.newGame()}logMsg(e){this.txt.text=e}gameOver(e,t){this.logMsg(e),this.popup.show(`Game Over!
You managed to remember ${t} beats!
Click to start new game.`,!1,!0)}createBkg(){const e=C.from("simon/background.png",{width:this.width,height:this.height});return e.texture.baseTexture.mipmap=q.OFF,e}createTitle(){const e=new x("SpaceSimon",{fill:15198183,fontSize:64,padding:15,fontFamily:"TeacherA"});e.anchor.set(.5,0);const t=C.from("simon/titleBackgrund.png",{width:e.width,height:e.height});return t.texture.baseTexture.mipmap=q.OFF,t.anchor.set(.5,0),t.mask=t.addChild(e),t}infoText(){const e=new x("",{fill:15198183,fontSize:32,padding:15,fontFamily:"AegisOutlet"});return e.anchor.set(.5),e}resize(e,t){this.bkg.width=e,this.bkg.height=t;const o=e*.95,i=t*.95,r=e*.75;this.starShip.position.set(e/2,t/2),this.starShip.scale.set(g(this.starShip,o,i)),this.title.position.set(e/2,10),this.title.scale.set(g(this.title,r,i)),t<e&&(this.title.scale.set(this.title.scale.x*.7),this.title.position.x=this.title.width/2),this.popup.position.set(e/2,t/2),this.popup.scale.set(g(this.popup,o,i));const a=g(this.bottom,o,i);this.bottom.scale.set(a);const u=this.bottom.getLocalBounds();this.bottom.position.set(e/2,t-u.height*a)}moveBackground(){this.bkg.tilePosition.y=(this.bkg.tilePosition.y+.1)%this.bkg.texture.height,this.title.tilePosition.y=(this.title.tilePosition.y+.1)%this.title.texture.height}destroy(e){p.shared.remove(this.moveBackground,this),super.destroy(e)}}te({assets:Q(),onLoaded:fe,onClicked:Se});function fe(){var o;const s=new Y({resolution:window.devicePixelRatio||1,autoDensity:!0,resizeTo:window,backgroundColor:0});((o=document.querySelector("#app"))!=null?o:document.body).appendChild(s.view);const t=new ge(s.screen.width,s.screen.height);s.stage.addChild(t),s.renderer.on("resize",t.resize,t),ve()}function Se(){I.playMusic("simon_music")}function ve(){const s=document.getElementById("menu"),e=document.getElementById("menu-toggle"),t=document.getElementById("menu-container"),o=new J.exports.Pane({container:t});return I.addSoundsControlPanel(o),e.addEventListener("pointerdown",()=>{s.classList.toggle("closed")}),o.addSeparator(),o.addButton({title:"Close menu"}).on("click",()=>{s.classList.add("closed")}),o}
